{"name": "Добавить и удалить сразу нескольких сотрудников", "status": "broken", "statusDetails": {"message": "NameError: name 'query' is not defined", "trace": "@allure.id(\"SkyPro-6\")\n    @allure.epic(\"Сотрудники\")\n    @allure.severity(\"blocker\")\n    @allure.story(\"Добавление и удаление несколько сотрудников\")\n    @allure.feature(\"ADD, DELETE\")\n    @allure.title(\"Добавить и удалить сразу нескольких сотрудников\")\n    @allure.suite(\"Тесты на работу с сотрудниками\")\n    def test_add_del_several_empl():\n        with allure.step(\"Cоздать новую организацию\"):\n            name, description = generate_company()\n            db.create_company_db(name, description)\n    \n        max_id = db.get_max_id_company(id)\n    \n        new_company = api.get_company(max_id)\n    \n        api_list_before = api.get_employees_list(max_id)\n        db_list_before = db.get_emploees_db(max_id)\n    \n        with allure.step(\"Добавить несколько сотрудников в организацию\"):\n            with allure.step(\"Вызвать цикл для добавления сотрудников\"):\n                for i in range(10):\n                    firstName, lastName, middleName, phone, email, birthdate, url, isActive = generate_employee(max_id)\n                    db.create_employee_db(firstName, lastName, middleName, phone, email, birthdate, url, max_id, isActive)\n    \n        max_id_empl = db.get_max_id_employee(id)\n    \n        api_list_after = api.get_employees_list(max_id)\n        db_list_after = db.get_emploees_db(max_id)\n    \n        with allure.step(\"Удалить несколько сотрудников\"):\n            with allure.step(\"Вызвать цикл для удаления всех сотрудников\"):\n                for i in range(10):\n>                   db.delete_employee_db(max_id_empl - i)\n\nLesson_9\\db_employees_test.py:289: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <EmployeesTable.EmployeesTable object at 0x000002194DC65CA0>, id = 2859\n\n    @allure.step(\"БД. Удалить сотрудника по {id}\")\n    def delete_employee_db(self, id):\n        qquery = self.__db.execute(self.__scripts['delete id employee'], id_to_delete = id)\n>       allure.attach(str(query.context.cursor.query), 'SQL', allure.attachment_type.TEXT)\nE       NameError: name 'query' is not defined\n\nLesson_9\\EmployeesTable.py:62: NameError"}, "steps": [{"name": "Cоздать новую организацию", "status": "passed", "steps": [{"name": "Метод для генерации названия организации", "status": "passed", "start": 1716726716884, "stop": 1716726716884}, {"name": "БД.Создать организацию с названием 'Корнилова Елизавета Аскольдовна':'Выдержать порог.'", "status": "passed", "attachments": [{"name": "SQL", "source": "8550fefb-bebb-4ce6-bcbc-4316b8e93eef-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "name", "value": "'Корнилова Елизавета Аскольдовна'"}, {"name": "description", "value": "'Выдержать порог.'"}], "start": 1716726716884, "stop": 1716726717481}], "start": 1716726716884, "stop": 1716726717481}, {"name": "БД. Получить максимальный <built-in function id> организации", "status": "passed", "attachments": [{"name": "SQL", "source": "bf428169-e019-4a8a-ae23-d1041b21e019-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "id", "value": "<built-in function id>"}], "start": 1716726717482, "stop": 1716726718076}, {"name": "БД. Получить список сотрудников организации 4146", "status": "passed", "attachments": [{"name": "SQL", "source": "53ce7a1e-6b76-4377-8a66-97354bd0b4ec-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "company_id", "value": "4146"}], "start": 1716726722107, "stop": 1716726722696}, {"name": "Добавить несколько сотрудников в организацию", "status": "passed", "steps": [{"name": "Вызвать цикл для добавления сотрудников", "status": "passed", "steps": [{"name": "Метод для генерации названий сотрудника", "status": "passed", "parameters": [{"name": "companyId", "value": "4146"}], "start": 1716726722697, "stop": 1716726722697}, {"name": "БД.Создать организацию с названием 'Гордей':'Комиссаров':'Никандровна':13194974042:'denisovtimofe@example.com':'1976-07-02':'https://npo.ru/':4146:False", "status": "passed", "attachments": [{"name": "SQL", "source": "47c523fb-a1d5-4b40-8e83-61c694d0b51e-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "first_name", "value": "'Гордей'"}, {"name": "last_name", "value": "'Комиссаров'"}, {"name": "middle_name", "value": "'Никандровна'"}, {"name": "phone", "value": "13194974042"}, {"name": "email", "value": "'denisovtimofe@example.com'"}, {"name": "birthdate", "value": "'1976-07-02'"}, {"name": "avatar_url", "value": "'https://npo.ru/'"}, {"name": "company_id", "value": "4146"}, {"name": "is_active", "value": "False"}], "start": 1716726722698, "stop": 1716726723290}, {"name": "Метод для генерации названий сотрудника", "status": "passed", "parameters": [{"name": "companyId", "value": "4146"}], "start": 1716726723290, "stop": 1716726723298}, {"name": "БД.Создать организацию с названием 'Иванна':'Шубин':'Иваннаовна':28727593047:'maslovamargarita@example.com':'1976-07-02':'https://npo.biz/':4146:False", "status": "passed", "attachments": [{"name": "SQL", "source": "1fbf3666-e7bc-4c02-9957-b7e39346880d-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "first_name", "value": "'Иванна'"}, {"name": "last_name", "value": "'Шубин'"}, {"name": "middle_name", "value": "'Иваннаовна'"}, {"name": "phone", "value": "28727593047"}, {"name": "email", "value": "'maslovamargarita@example.com'"}, {"name": "birthdate", "value": "'1976-07-02'"}, {"name": "avatar_url", "value": "'https://npo.biz/'"}, {"name": "company_id", "value": "4146"}, {"name": "is_active", "value": "False"}], "start": 1716726723298, "stop": 1716726723891}, {"name": "Метод для генерации названий сотрудника", "status": "passed", "parameters": [{"name": "companyId", "value": "4146"}], "start": 1716726723891, "stop": 1716726723892}, {"name": "БД.Создать организацию с названием 'Борислав':'Титов':'Вениаминовна':62366171860:'avgust55@example.com':'1976-07-02':'https://rao.org/':4146:True", "status": "passed", "attachments": [{"name": "SQL", "source": "bf5af9bb-61ef-45c0-bf18-553d0aaa12f7-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "first_name", "value": "'Борислав'"}, {"name": "last_name", "value": "'Титов'"}, {"name": "middle_name", "value": "'Вениаминовна'"}, {"name": "phone", "value": "62366171860"}, {"name": "email", "value": "'avgust55@example.com'"}, {"name": "birthdate", "value": "'1976-07-02'"}, {"name": "avatar_url", "value": "'https://rao.org/'"}, {"name": "company_id", "value": "4146"}, {"name": "is_active", "value": "True"}], "start": 1716726723893, "stop": 1716726724481}, {"name": "Метод для генерации названий сотрудника", "status": "passed", "parameters": [{"name": "companyId", "value": "4146"}], "start": 1716726724482, "stop": 1716726724483}, {"name": "БД.Создать организацию с названием 'Антонин':'Голубев':'Элеонораовна':48047270197:'dorofeevsolomon@example.com':'1976-07-02':'http://ooo.info/':4146:True", "status": "passed", "attachments": [{"name": "SQL", "source": "e82abe65-c277-4135-b2e7-74e984cde74e-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "first_name", "value": "'Антонин'"}, {"name": "last_name", "value": "'Голубев'"}, {"name": "middle_name", "value": "'Элеонораовна'"}, {"name": "phone", "value": "48047270197"}, {"name": "email", "value": "'dorofeevsolomon@example.com'"}, {"name": "birthdate", "value": "'1976-07-02'"}, {"name": "avatar_url", "value": "'http://ooo.info/'"}, {"name": "company_id", "value": "4146"}, {"name": "is_active", "value": "True"}], "start": 1716726724484, "stop": 1716726725080}, {"name": "Метод для генерации названий сотрудника", "status": "passed", "parameters": [{"name": "companyId", "value": "4146"}], "start": 1716726725080, "stop": 1716726725081}, {"name": "БД.Создать организацию с названием 'Надежда':'Брагина':'Викторияовна':82473355592:'fedorkuzmin@example.com':'1976-07-02':'https://ao.biz/':4146:True", "status": "passed", "attachments": [{"name": "SQL", "source": "76bc4444-bce0-4e50-badc-722aada8656f-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "first_name", "value": "'Надежда'"}, {"name": "last_name", "value": "'Брагина'"}, {"name": "middle_name", "value": "'Викторияовна'"}, {"name": "phone", "value": "82473355592"}, {"name": "email", "value": "'fedorkuzmin@example.com'"}, {"name": "birthdate", "value": "'1976-07-02'"}, {"name": "avatar_url", "value": "'https://ao.biz/'"}, {"name": "company_id", "value": "4146"}, {"name": "is_active", "value": "True"}], "start": 1716726725082, "stop": 1716726725682}, {"name": "Метод для генерации названий сотрудника", "status": "passed", "parameters": [{"name": "companyId", "value": "4146"}], "start": 1716726725682, "stop": 1716726725683}, {"name": "БД.Создать организацию с названием 'Панкрат':'Поляков':'Феофановна':88015098354:'kapustinagalina@example.com':'1976-07-02':'https://obedinennaja.edu/':4146:True", "status": "passed", "attachments": [{"name": "SQL", "source": "0fae5ad6-026c-4d14-b384-e70ed06d759b-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "first_name", "value": "'Панкрат'"}, {"name": "last_name", "value": "'Поляков'"}, {"name": "middle_name", "value": "'Феофановна'"}, {"name": "phone", "value": "88015098354"}, {"name": "email", "value": "'kapustinagalina@example.com'"}, {"name": "birthdate", "value": "'1976-07-02'"}, {"name": "avatar_url", "value": "'https://obedinennaja.edu/'"}, {"name": "company_id", "value": "4146"}, {"name": "is_active", "value": "True"}], "start": 1716726725684, "stop": 1716726726319}, {"name": "Метод для генерации названий сотрудника", "status": "passed", "parameters": [{"name": "companyId", "value": "4146"}], "start": 1716726726319, "stop": 1716726726324}, {"name": "БД.Создать организацию с названием 'Анисим':'Исаева':'Мстиславовна':94870664720:'denis1981@example.com':'1976-07-02':'https://mumt.biz/':4146:False", "status": "passed", "attachments": [{"name": "SQL", "source": "d99901d3-d5f7-4cb3-ad54-f4843dc0d4d0-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "first_name", "value": "'Анисим'"}, {"name": "last_name", "value": "'Исаева'"}, {"name": "middle_name", "value": "'Мстиславовна'"}, {"name": "phone", "value": "94870664720"}, {"name": "email", "value": "'denis1981@example.com'"}, {"name": "birthdate", "value": "'1976-07-02'"}, {"name": "avatar_url", "value": "'https://mumt.biz/'"}, {"name": "company_id", "value": "4146"}, {"name": "is_active", "value": "False"}], "start": 1716726726324, "stop": 1716726726920}, {"name": "Метод для генерации названий сотрудника", "status": "passed", "parameters": [{"name": "companyId", "value": "4146"}], "start": 1716726726920, "stop": 1716726726921}, {"name": "БД.Создать организацию с названием 'Влас':'Михайлов':'Ларисаовна':97869946346:'tit1982@example.com':'1976-07-02':'http://www.gruppa.biz/':4146:True", "status": "passed", "attachments": [{"name": "SQL", "source": "9cd4176d-e36c-4b9b-ae38-2088ffd210dd-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "first_name", "value": "'Влас'"}, {"name": "last_name", "value": "'Михайлов'"}, {"name": "middle_name", "value": "'Ларисаовна'"}, {"name": "phone", "value": "97869946346"}, {"name": "email", "value": "'tit1982@example.com'"}, {"name": "birthdate", "value": "'1976-07-02'"}, {"name": "avatar_url", "value": "'http://www.gruppa.biz/'"}, {"name": "company_id", "value": "4146"}, {"name": "is_active", "value": "True"}], "start": 1716726726921, "stop": 1716726727519}, {"name": "Метод для генерации названий сотрудника", "status": "passed", "parameters": [{"name": "companyId", "value": "4146"}], "start": 1716726727520, "stop": 1716726727521}, {"name": "БД.Создать организацию с названием 'Мокей':'Захарова':'Игнатийовна':46986332909:'adrian_1996@example.com':'1976-07-02':'https://www.zao.ru/':4146:False", "status": "passed", "attachments": [{"name": "SQL", "source": "1c0c11b6-0bfa-4f39-a97c-37662c68db94-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "first_name", "value": "'Мокей'"}, {"name": "last_name", "value": "'Захарова'"}, {"name": "middle_name", "value": "'Игнатийовна'"}, {"name": "phone", "value": "46986332909"}, {"name": "email", "value": "'adrian_1996@example.com'"}, {"name": "birthdate", "value": "'1976-07-02'"}, {"name": "avatar_url", "value": "'https://www.zao.ru/'"}, {"name": "company_id", "value": "4146"}, {"name": "is_active", "value": "False"}], "start": 1716726727522, "stop": 1716726728117}, {"name": "Метод для генерации названий сотрудника", "status": "passed", "parameters": [{"name": "companyId", "value": "4146"}], "start": 1716726728118, "stop": 1716726728119}, {"name": "БД.Создать организацию с названием 'Якуб':'Иванова':'Руслановна':11319937554:'bojan_70@example.com':'1976-07-02':'http://zao.info/':4146:True", "status": "passed", "attachments": [{"name": "SQL", "source": "d344080d-41df-42d2-9e85-634744c20fe9-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "first_name", "value": "'Якуб'"}, {"name": "last_name", "value": "'Иванова'"}, {"name": "middle_name", "value": "'Руслановна'"}, {"name": "phone", "value": "11319937554"}, {"name": "email", "value": "'bojan_70@example.com'"}, {"name": "birthdate", "value": "'1976-07-02'"}, {"name": "avatar_url", "value": "'http://zao.info/'"}, {"name": "company_id", "value": "4146"}, {"name": "is_active", "value": "True"}], "start": 1716726728120, "stop": 1716726728730}], "start": 1716726722696, "stop": 1716726728730}], "start": 1716726722696, "stop": 1716726728731}, {"name": "БД. Получить максимальный <built-in function id> сотрудника", "status": "passed", "attachments": [{"name": "SQL", "source": "c784bc3a-ad1f-45f3-bc0f-a01d4d2ad1fa-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "id", "value": "<built-in function id>"}], "start": 1716726728731, "stop": 1716726729351}, {"name": "БД. Получить список сотрудников организации 4146", "status": "passed", "attachments": [{"name": "SQL", "source": "64a4a3c7-ed3c-4208-adde-7a1ea7fc4f32-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "company_id", "value": "4146"}], "start": 1716726731334, "stop": 1716726731945}, {"name": "Удалить несколько сотрудников", "status": "broken", "statusDetails": {"message": "NameError: name 'query' is not defined\n", "trace": "  File \"C:\\Users\\User\\Documents\\GitHub\\desktop-tutorial\\skypro_python_homeworks22\\Lesson_9\\db_employees_test.py\", line 289, in test_add_del_several_empl\n    db.delete_employee_db(max_id_empl - i)\n  File \"C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\Documents\\GitHub\\desktop-tutorial\\skypro_python_homeworks22\\Lesson_9\\EmployeesTable.py\", line 62, in delete_employee_db\n    allure.attach(str(query.context.cursor.query), 'SQL', allure.attachment_type.TEXT)\n                      ^^^^^\n"}, "steps": [{"name": "Вызвать цикл для удаления всех сотрудников", "status": "broken", "statusDetails": {"message": "NameError: name 'query' is not defined\n", "trace": "  File \"C:\\Users\\User\\Documents\\GitHub\\desktop-tutorial\\skypro_python_homeworks22\\Lesson_9\\db_employees_test.py\", line 289, in test_add_del_several_empl\n    db.delete_employee_db(max_id_empl - i)\n  File \"C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\Documents\\GitHub\\desktop-tutorial\\skypro_python_homeworks22\\Lesson_9\\EmployeesTable.py\", line 62, in delete_employee_db\n    allure.attach(str(query.context.cursor.query), 'SQL', allure.attachment_type.TEXT)\n                      ^^^^^\n"}, "steps": [{"name": "БД. Удалить сотрудника по 2859", "status": "broken", "statusDetails": {"message": "NameError: name 'query' is not defined\n", "trace": "  File \"C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\Documents\\GitHub\\desktop-tutorial\\skypro_python_homeworks22\\Lesson_9\\EmployeesTable.py\", line 62, in delete_employee_db\n    allure.attach(str(query.context.cursor.query), 'SQL', allure.attachment_type.TEXT)\n                      ^^^^^\n"}, "parameters": [{"name": "id", "value": "2859"}], "start": 1716726731945, "stop": 1716726732527}], "start": 1716726731945, "stop": 1716726732529}], "start": 1716726731945, "stop": 1716726732530}], "start": 1716726716883, "stop": 1716726732532, "uuid": "f7e15cc0-86c1-42c0-9d1c-2e59ef56cf45", "historyId": "21b7f01ff9b1853d249a9967b9a9fd57", "testCaseId": "21b7f01ff9b1853d249a9967b9a9fd57", "fullName": "Lesson_9.db_employees_test#test_add_del_several_empl", "labels": [{"name": "story", "value": "Добавление и удаление несколько сотрудников"}, {"name": "as_id", "value": "SkyPro-6"}, {"name": "suite", "value": "Тесты на работу с сотрудниками"}, {"name": "feature", "value": "ADD, DELETE"}, {"name": "severity", "value": "blocker"}, {"name": "epic", "value": "Сотрудники"}, {"name": "parentSuite", "value": "Lesson_9"}, {"name": "host", "value": "DESKTOP-UVLT28S"}, {"name": "thread", "value": "41740-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "Lesson_9.db_employees_test"}]}