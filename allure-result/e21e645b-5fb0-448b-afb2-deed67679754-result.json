{"name": "Удалить сотрудника по id", "status": "broken", "statusDetails": {"message": "NameError: name 'query' is not defined", "trace": "@allure.id(\"SkyPro-5\")\n    @allure.epic(\"Сотрудники\")\n    @allure.severity(\"blocker\")\n    @allure.story(\"Удаление сотрудника\")\n    @allure.feature(\"DELETE\")\n    @allure.title(\"Удалить сотрудника по id\")\n    @allure.suite(\"Тесты на работу с сотрудниками\")\n    def test_delete_employee():\n        with allure.step(\"Cоздать новую организацию\"):\n            name, description = generate_company()\n            db.create_company_db(name, description)\n    \n        max_id = db.get_max_id_company(id)\n    \n        new_company = api.get_company(max_id)\n    \n        api_list_before = api.get_employees_list(max_id)\n        db_list_before = db.get_emploees_db(max_id)\n    \n        with allure.step(\"Добавить нового сотрудника\"):\n            firstName, lastName, middleName, phone, email, birthdate, url, isActive = generate_employee(max_id)\n            db.create_employee_db(firstName, lastName, middleName, phone, email, birthdate, url, max_id, isActive)\n    \n        max_id_empl = db.get_max_id_employee(id)\n    \n        api_list_after = api.get_employees_list(max_id)\n        db_list_after = db.get_emploees_db(max_id)\n    \n>       db.delete_employee_db(max_id_empl)\n\nLesson_9\\db_employees_test.py:249: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <EmployeesTable.EmployeesTable object at 0x000002194DC65CA0>, id = 2849\n\n    @allure.step(\"БД. Удалить сотрудника по {id}\")\n    def delete_employee_db(self, id):\n        qquery = self.__db.execute(self.__scripts['delete id employee'], id_to_delete = id)\n>       allure.attach(str(query.context.cursor.query), 'SQL', allure.attachment_type.TEXT)\nE       NameError: name 'query' is not defined\n\nLesson_9\\EmployeesTable.py:62: NameError"}, "steps": [{"name": "Cоздать новую организацию", "status": "passed", "steps": [{"name": "Метод для генерации названия организации", "status": "passed", "start": 1716726706292, "stop": 1716726706292}, {"name": "БД.Создать организацию с названием 'Борисов Лазарь Ильясович':'Школьный означать.'", "status": "passed", "attachments": [{"name": "SQL", "source": "29ad98f2-e76d-48a2-af8e-7fe707958fbe-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "name", "value": "'Борисов Лазарь Ильясович'"}, {"name": "description", "value": "'Школьный означать.'"}], "start": 1716726706293, "stop": 1716726706892}], "start": 1716726706292, "stop": 1716726706893}, {"name": "БД. Получить максимальный <built-in function id> организации", "status": "passed", "attachments": [{"name": "SQL", "source": "172c62f4-a860-4000-ba10-511b3939eeba-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "id", "value": "<built-in function id>"}], "start": 1716726706893, "stop": 1716726707502}, {"name": "БД. Получить список сотрудников организации 4145", "status": "passed", "attachments": [{"name": "SQL", "source": "539df3e0-7991-46f7-b1fe-fb1a13e3ef27-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "company_id", "value": "4145"}], "start": 1716726711875, "stop": 1716726712462}, {"name": "Добавить нового сотрудника", "status": "passed", "steps": [{"name": "Метод для генерации названий сотрудника", "status": "passed", "parameters": [{"name": "companyId", "value": "4145"}], "start": 1716726712463, "stop": 1716726712464}, {"name": "БД.Создать организацию с названием 'Спиридон':'Сазонова':'Аверкийовна':22752238080:'cevseev@example.com':'1976-07-02':'http://ao.com/':4145:False", "status": "passed", "attachments": [{"name": "SQL", "source": "78c312c3-86ea-48a5-9982-4dd628f07b14-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "first_name", "value": "'Спиридон'"}, {"name": "last_name", "value": "'Сазонова'"}, {"name": "middle_name", "value": "'Аверкийовна'"}, {"name": "phone", "value": "22752238080"}, {"name": "email", "value": "'cevseev@example.com'"}, {"name": "birthdate", "value": "'1976-07-02'"}, {"name": "avatar_url", "value": "'http://ao.com/'"}, {"name": "company_id", "value": "4145"}, {"name": "is_active", "value": "False"}], "start": 1716726712464, "stop": 1716726713050}], "start": 1716726712463, "stop": 1716726713050}, {"name": "БД. Получить максимальный <built-in function id> сотрудника", "status": "passed", "attachments": [{"name": "SQL", "source": "bff883f3-58a7-4f4e-9e5e-236b1583d40c-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "id", "value": "<built-in function id>"}], "start": 1716726713051, "stop": 1716726713636}, {"name": "БД. Получить список сотрудников организации 4145", "status": "passed", "attachments": [{"name": "SQL", "source": "cf11bc74-3eb8-44c2-987b-72eba09ea87d-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "company_id", "value": "4145"}], "start": 1716726715621, "stop": 1716726716216}, {"name": "БД. Удалить сотрудника по 2849", "status": "broken", "statusDetails": {"message": "NameError: name 'query' is not defined\n", "trace": "  File \"C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Users\\User\\Documents\\GitHub\\desktop-tutorial\\skypro_python_homeworks22\\Lesson_9\\EmployeesTable.py\", line 62, in delete_employee_db\n    allure.attach(str(query.context.cursor.query), 'SQL', allure.attachment_type.TEXT)\n                      ^^^^^\n"}, "parameters": [{"name": "id", "value": "2849"}], "start": 1716726716217, "stop": 1716726716799}], "start": 1716726706291, "stop": 1716726716803, "uuid": "dcdf8896-9299-4cc0-a6a8-a1d838151d5b", "historyId": "583747d1f63a628b8f02239f435a6dbc", "testCaseId": "583747d1f63a628b8f02239f435a6dbc", "fullName": "Lesson_9.db_employees_test#test_delete_employee", "labels": [{"name": "story", "value": "Удаление сотрудника"}, {"name": "as_id", "value": "SkyPro-5"}, {"name": "feature", "value": "DELETE"}, {"name": "suite", "value": "Тесты на работу с сотрудниками"}, {"name": "severity", "value": "blocker"}, {"name": "epic", "value": "Сотрудники"}, {"name": "parentSuite", "value": "Lesson_9"}, {"name": "host", "value": "DESKTOP-UVLT28S"}, {"name": "thread", "value": "41740-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "Lesson_9.db_employees_test"}]}